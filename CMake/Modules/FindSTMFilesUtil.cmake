FUNCTION(STM32_SET_FILE_NAMES out)
    SET(res "")
    FOREACH(I ${ARGN})
        GET_FILENAME_COMPONENT(TMP ${I} NAME)
        LIST(APPEND res ${TMP})
    ENDFOREACH()
    SET(${out} "${res}" PARENT_SCOPE)
ENDFUNCTION()

FUNCTION(STM32_PREPEND_FILE_NAMES out prefix)
    SET(res "")
    FOREACH(I ${ARGN})
        LIST(APPEND res "${prefix}${I}")
    ENDFOREACH()
    SET(${out} "${res}" PARENT_SCOPE)
ENDFUNCTION()

MACRO(STM32_LOCATE_CMSIS_REL_HEADERS)
    SET(STM32_CMSIS_REL_HEADERS_F0
        Device/ST/STM32F0xx/Include/system_stm32f0xx.h
        Device/ST/STM32F0xx/Include/stm32f0xx.h
        Include/core_cm0.h
        Include/arm_math.h
        Include/core_cmFunc.h
        Include/core_cmInstr.h
    )
    SET(STM32_CMSIS_REL_HEADERS_F1 
        CM3/DeviceSupport/ST/STM32F10x/system_stm32f10x.h
        CM3/DeviceSupport/ST/STM32F10x/stm32f10x.h
        CM3/CoreSupport/core_cm3.h
    )
    SET(STM32_CMSIS_REL_HEADERS_F2 
        Device/ST/STM32F2xx/Include/system_stm32f2xx.h
        Device/ST/STM32F2xx/Include/stm32f2xx.h
        Include/core_cm3.h
        Include/arm_math.h
        Include/core_cmFunc.h
        Include/core_cmInstr.h
    )
    SET(STM32_CMSIS_REL_HEADERS_F4 
        Device/ST/STM32F4xx/Include/system_stm32f4xx.h
        Device/ST/STM32F4xx/Include/stm32f4xx.h
        Include/core_cm4.h
        Include/core_cm4_simd.h
        Include/core_cmFunc.h
        Include/core_cmInstr.h
    )
ENDMACRO()

MACRO(STM32_LOCATE_STDPERIPH_REL_HEADERS)
    SET(STM32_STDPERIPH_REL_HEADERS_F0
        stm32f0xx_adc.h
        stm32f0xx_can.h
        stm32f0xx_cec.h
        stm32f0xx_comp.h
        stm32f0xx_crc.h
        stm32f0xx_crs.h
        stm32f0xx_dac.h
        stm32f0xx_dbgmcu.h
        stm32f0xx_dma.h
        stm32f0xx_exti.h
        stm32f0xx_flash.h
        stm32f0xx_gpio.h
        stm32f0xx_i2c.h
        stm32f0xx_iwdg.h
        stm32f0xx_misc.h
        stm32f0xx_pwr.h
        stm32f0xx_rcc.h
        stm32f0xx_rtc.h
        stm32f0xx_spi.h
        stm32f0xx_syscfg.h
        stm32f0xx_tim.h
        stm32f0xx_usart.h
        stm32f0xx_wwdg.h
        stm32f0xx_misc.h
    )
    SET(STM32_STDPERIPH_REL_HEADERS_F1
        stm32f10x_adc.h
        stm32f10x_bkp.h
        stm32f10x_can.h
        stm32f10x_cec.h
        stm32f10x_crc.h
        stm32f10x_dac.h
        stm32f10x_dbgmcu.h
        stm32f10x_dma.h
        stm32f10x_exti.h
        stm32f10x_flash.h
        stm32f10x_fsmc.h
        stm32f10x_gpio.h
        stm32f10x_i2c.h
        stm32f10x_iwdg.h
        stm32f10x_pwr.h
        stm32f10x_rcc.h
        stm32f10x_rtc.h
        stm32f10x_sdio.h
        stm32f10x_spi.h
        stm32f10x_tim.h
        stm32f10x_usart.h
        stm32f10x_wwdg.h
        stm32f10x_misc.h
    )
    SET(STM32_STDPERIPH_REL_HEADERS_F2
        stm32f2xx_adc.h
        stm32f2xx_can.h
        stm32f2xx_crc.h
        stm32f2xx_cryp.h
        stm32f2xx_dac.h
        stm32f2xx_dbgmcu.h
        stm32f2xx_dcmi.h
        stm32f2xx_dma.h
        stm32f2xx_exti.h
        stm32f2xx_flash.h
        stm32f2xx_fsmc.h
        stm32f2xx_gpio.h
        stm32f2xx_hash.h
        stm32f2xx_i2c.h
        stm32f2xx_iwdg.h
        stm32f2xx_pwr.h
        stm32f2xx_rcc.h
        stm32f2xx_rng.h
        stm32f2xx_rtc.h
        stm32f2xx_sdio.h
        stm32f2xx_spi.h
        stm32f2xx_syscfg.h
        stm32f2xx_tim.h
        stm32f2xx_usart.h
        stm32f2xx_wwdg.h
        stm32f2xx_misc.h
    )
    SET(STM32_STDPERIPH_REL_HEADERS_HAL_F2
        stm32f2xx_hal.h
        stm32f2xx_hal_adc.h
        stm32f2xx_hal_adc_ex.h
        stm32f2xx_hal_can.h
        stm32f2xx_hal_conf.h
        stm32f2xx_hal_conf_template.h
        stm32f2xx_hal_cortex.h
        stm32f2xx_hal_crc.h
        stm32f2xx_hal_cryp.h
        stm32f2xx_hal_dac.h
        stm32f2xx_hal_dac_ex.h
        stm32f2xx_hal_dcmi.h
        stm32f2xx_hal_def.h
        stm32f2xx_hal_dma.h
        stm32f2xx_hal_dma_ex.h
        stm32f2xx_hal_eth.h
        stm32f2xx_hal_flash.h
        stm32f2xx_hal_flash_ex.h
        stm32f2xx_hal_gpio.h
        stm32f2xx_hal_gpio_ex.h
        stm32f2xx_hal_hash.h
        stm32f2xx_hal_hcd.h
        stm32f2xx_hal_i2c.h
        stm32f2xx_hal_i2s.h
        stm32f2xx_hal_irda.h
        stm32f2xx_hal_iwdg.h
        stm32f2xx_hal_nand.h
        stm32f2xx_hal_nor.h
        stm32f2xx_hal_pccard.h
        stm32f2xx_hal_pcd.h
        stm32f2xx_hal_pwr.h
        stm32f2xx_hal_pwr_ex.h
        stm32f2xx_hal_rcc.h
        stm32f2xx_hal_rcc_ex.h
        stm32f2xx_hal_rng.h
        stm32f2xx_hal_rtc.h
        stm32f2xx_hal_rtc_ex.h
        stm32f2xx_hal_sd.h
        stm32f2xx_hal_smartcard.h
        stm32f2xx_hal_spi.h
        stm32f2xx_hal_sram.h
        stm32f2xx_hal_tim.h
        stm32f2xx_hal_tim_ex.h
        stm32f2xx_hal_uart.h
        stm32f2xx_hal_usart.h
        stm32f2xx_hal_wwdg.h
        stm32f2xx_ll_fsmc.h
        stm32f2xx_ll_sdmmc.h
        stm32f2xx_ll_usb.h
    )    
    SET(STM32_STDPERIPH_REL_HEADERS_F4
        stm32f4xx_adc.h
        stm32f4xx_can.h
        stm32f4xx_crc.h
        stm32f4xx_cryp.h
        stm32f4xx_dac.h
        stm32f4xx_dbgmcu.h
        stm32f4xx_dcmi.h
        stm32f4xx_dma.h
        stm32f4xx_dma2d.h
        stm32f4xx_exti.h
        stm32f4xx_flash.h
        stm32f4xx_fmc.h
        stm32f4xx_fsmc.h
        stm32f4xx_gpio.h
        stm32f4xx_hash.h
        stm32f4xx_i2c.h
        stm32f4xx_iwdg.h
        stm32f4xx_ltdc.h
        stm32f4xx_pwr.h
        stm32f4xx_rcc.h
        stm32f4xx_rng.h
        stm32f4xx_rtc.h
        stm32f4xx_sai.h
        stm32f4xx_sdio.h
        stm32f4xx_spi.h
        stm32f4xx_syscfg.h
        stm32f4xx_tim.h
        stm32f4xx_usart.h
        stm32f4xx_wwdg.h
        stm32f4xx_misc.h
    )
ENDMACRO()
